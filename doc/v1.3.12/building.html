<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Building open62541 &mdash; open62541 1.3.12 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/documentation_options.js?v=93b43ced"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installing open62541" href="installing.html" />
    <link rel="prev" title="Introduction" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="toc.html" class="icon icon-home">
            open62541
              <img src="_static/open62541_html.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building open62541</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-the-library">Building the Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-with-cmake-on-ubuntu-or-debian">Building with CMake on Ubuntu or Debian</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-with-cmake-on-windows">Building with CMake on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-on-os-x">Building on OS X</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-on-openbsd">Building on OpenBSD</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-debian-packages-inside-docker-container-with-cmake-on-ubuntu-or-debian">Building Debian Packages inside Docker Container with CMake on Ubuntu or Debian</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cmake-build-options-and-debian-packaging">CMake Build Options and Debian Packaging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#build-options">Build Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main-build-options">Main Build Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#select-build-artefacts">Select build artefacts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detailed-sdk-features">Detailed SDK Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pubsub-build-options">PubSub Build Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debug-build-options">Debug Build Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-a-shared-library">Building a shared library</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minimizing-the-binary-size">Minimizing the binary size</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-examples">Building the Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-for-specific-architectures">Building for specific architectures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#windows-linux-macos">Windows, Linux, MacOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#freertos-lwip">freeRTOS + LwIP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing open62541</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="protocol.html">Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodestore.html">Information Modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodestore.html#node-pointer">Node Pointer</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="pubsub.html">PubSub</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="nodeset_compiler.html">XML Nodeset Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal.html">Internals</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="toc.html">open62541</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="toc.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Building open62541</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/building.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="building-open62541">
<span id="building"></span><h1>Building open62541<a class="headerlink" href="#building-open62541" title="Link to this heading">¶</a></h1>
<p>open62541 uses CMake to build the library and binaries. The library version is automatically
detected using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">describe</span></code>. This command returns a valid version string based on the current tag.
If you did not directly clone the sources, but use the tar or zip package from a release, you need
to manually specify the version. In that case use e.g. <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">-DOPEN62541_VERSION=v1.0.3</span></code>.</p>
<section id="building-the-library">
<h2>Building the Library<a class="headerlink" href="#building-the-library" title="Link to this heading">¶</a></h2>
<section id="building-with-cmake-on-ubuntu-or-debian">
<h3>Building with CMake on Ubuntu or Debian<a class="headerlink" href="#building-with-cmake-on-ubuntu-or-debian" title="Link to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>git<span class="w"> </span>build-essential<span class="w"> </span>gcc<span class="w"> </span>pkg-config<span class="w"> </span>cmake<span class="w"> </span>python

<span class="c1"># enable additional features</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>cmake-curses-gui<span class="w"> </span><span class="c1"># for the ccmake graphical interface</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libmbedtls-dev<span class="w"> </span><span class="c1"># for encryption support</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>check<span class="w"> </span>libsubunit-dev<span class="w"> </span><span class="c1"># for unit tests</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>python-sphinx<span class="w"> </span>graphviz<span class="w"> </span><span class="c1"># for documentation generation</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>python-sphinx-rtd-theme<span class="w"> </span><span class="c1"># documentation style</span>

<span class="nb">cd</span><span class="w"> </span>open62541
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..
make

<span class="c1"># select additional features</span>
ccmake<span class="w"> </span>..
make

<span class="c1"># build documentation</span>
make<span class="w"> </span>doc<span class="w"> </span><span class="c1"># html documentation</span>
make<span class="w"> </span>doc_pdf<span class="w"> </span><span class="c1"># pdf documentation (requires LaTeX)</span>
</pre></div>
</div>
</section>
<section id="building-with-cmake-on-windows">
<h3>Building with CMake on Windows<a class="headerlink" href="#building-with-cmake-on-windows" title="Link to this heading">¶</a></h3>
<p>Here we explain the build process for Visual Studio (2013 or newer). To build
with MinGW, just replace the compiler selection in the call to CMake.</p>
<ul class="simple">
<li><p>Download and install</p>
<ul>
<li><p>Python 2.7.x (Python 3.x works as well): <a class="reference external" href="https://python.org/downloads">https://python.org/downloads</a></p></li>
<li><p>CMake: <a class="reference external" href="http://www.cmake.org/cmake/resources/software.html">http://www.cmake.org/cmake/resources/software.html</a></p></li>
<li><p>Microsoft Visual Studio: <a class="reference external" href="https://www.visualstudio.com/products/visual-studio-community-vs">https://www.visualstudio.com/products/visual-studio-community-vs</a></p></li>
</ul>
</li>
<li><p>Download the open62541 sources (using git or as a zipfile from github)</p></li>
<li><p>Open a command shell (cmd) and run</p></li>
</ul>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">cd</span> <span class="p">&lt;</span>path-to<span class="p">&gt;</span>\open62541
<span class="k">mkdir</span> build
<span class="k">cd</span> build
<span class="p">&lt;</span>path-to<span class="p">&gt;</span>\cmake.exe .. -G <span class="s2">&quot;Visual Studio 14 2015&quot;</span>
<span class="p">:</span><span class="c1">: You can use use cmake-gui for a graphical user-interface to select features</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Then open <code class="file docutils literal notranslate"><span class="pre">buildopen62541.sln</span></code> in Visual Studio 2015 and build as usual</p></li>
</ul>
</section>
<section id="building-on-os-x">
<h3>Building on OS X<a class="headerlink" href="#building-on-os-x" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Download and install</p>
<ul>
<li><p>Xcode: <a class="reference external" href="https://itunes.apple.com/us/app/xcode/id497799835?ls=1&amp;mt=12">https://itunes.apple.com/us/app/xcode/id497799835?ls=1&amp;mt=12</a></p></li>
<li><p>Homebrew: <a class="reference external" href="http://brew.sh/">http://brew.sh/</a></p></li>
<li><p>Pip (a package manager for Python, may be preinstalled): <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">easy_install</span> <span class="pre">pip</span></code></p></li>
</ul>
</li>
<li><p>Run the following in a shell</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew<span class="w"> </span>install<span class="w"> </span>cmake
pip<span class="w"> </span>install<span class="w"> </span>sphinx<span class="w"> </span><span class="c1"># for documentation generation</span>
pip<span class="w"> </span>install<span class="w"> </span>sphinx_rtd_theme<span class="w"> </span><span class="c1"># documentation style</span>
brew<span class="w"> </span>install<span class="w"> </span>graphviz<span class="w"> </span><span class="c1"># for graphics in the documentation</span>
brew<span class="w"> </span>install<span class="w"> </span>check<span class="w"> </span><span class="c1"># for unit tests</span>
</pre></div>
</div>
<p>Follow Ubuntu instructions without the <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> commands as these are taken care of by the above packages.</p>
</section>
<section id="building-on-openbsd">
<h3>Building on OpenBSD<a class="headerlink" href="#building-on-openbsd" title="Link to this heading">¶</a></h3>
<p>The procedure below works on OpenBSD 5.8 with gcc version 4.8.4, cmake version 3.2.3 and Python version 2.7.10.</p>
<ul class="simple">
<li><p>Install a recent gcc, python and cmake:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pkg_add<span class="w"> </span>gcc<span class="w"> </span>python<span class="w"> </span>cmake
</pre></div>
</div>
<ul class="simple">
<li><p>Tell the system to actually use the recent gcc (it gets installed as egcc on OpenBSD):</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">CC</span><span class="o">=</span>egcc<span class="w"> </span><span class="nv">CXX</span><span class="o">=</span>eg++
</pre></div>
</div>
<ul class="simple">
<li><p>Now procede as described for Ubuntu/Debian:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>open62541
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..
make
</pre></div>
</div>
</section>
<section id="building-debian-packages-inside-docker-container-with-cmake-on-ubuntu-or-debian">
<h3>Building Debian Packages inside Docker Container with CMake on Ubuntu or Debian<a class="headerlink" href="#building-debian-packages-inside-docker-container-with-cmake-on-ubuntu-or-debian" title="Link to this heading">¶</a></h3>
<p>Here is an example howto build the library as Debian package inside a Docker container</p>
<ul class="simple">
<li><p>Download and install</p>
<ul>
<li><p>Docker Engine: <a class="reference external" href="https://docs.docker.com/install/linux/docker-ce/debian/">https://docs.docker.com/install/linux/docker-ce/debian/</a></p></li>
<li><p>docker-deb-builder: <a class="reference external" href="https://github.com/tsaarni/docker-deb-builder.git">https://github.com/tsaarni/docker-deb-builder.git</a></p></li>
<li><p>open62541: <a class="reference external" href="https://github.com/open62541/open62541.git">https://github.com/open62541/open62541.git</a></p></li>
</ul>
</li>
</ul>
<p>Install Docker as described at <a class="reference external" href="https://docs.docker.com/install/linux/docker-ce/debian/">https://docs.docker.com/install/linux/docker-ce/debian/</a> .</p>
<p>Get the docker-deb-builder utility from github and make Docker images for the needed
Debian and/or Ubuntu relases</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># make and goto local development path (e.g. ~/development)</span>
mkdir<span class="w"> </span>~/development
<span class="nb">cd</span><span class="w"> </span>~/development

<span class="c1"># clone docker-deb-builder utility from github and change into builder directory</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/tsaarni/docker-deb-builder.git
<span class="nb">cd</span><span class="w"> </span>docker-deb-builder

<span class="c1"># make Docker builder images (e.g. Ubuntu 18.04 and 17.04)</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>docker-deb-builder:18.04<span class="w"> </span>-f<span class="w"> </span>Dockerfile-ubuntu-18.04<span class="w"> </span>.
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>docker-deb-builder:17.04<span class="w"> </span>-f<span class="w"> </span>Dockerfile-ubuntu-17.04<span class="w"> </span>.
</pre></div>
</div>
<p>Make a local copy of the open62541 git repo and checkout a pack branch</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a local copy of the open62541 git repo (e.g. in the home directory)</span>
<span class="c1"># and checkout a pack branch (e.g. pack/1.0)</span>
<span class="nb">cd</span><span class="w"> </span>~
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/open62541/open62541.git
<span class="nb">cd</span><span class="w"> </span>~/open62541
git<span class="w"> </span>checkout<span class="w"> </span>pack/1.0
</pre></div>
</div>
<p>Now it’s all set to build Debian/Ubuntu open62541 packages</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># goto local developmet path</span>
<span class="nb">cd</span><span class="w"> </span>~/development

<span class="c1"># make a local output directory for the builder where the packages can be placed after build</span>
mkdir<span class="w"> </span>output

<span class="c1"># build Debian/Ubuntu packages inside Docker container (e.g. Ubuntu-18.04)</span>
./build<span class="w"> </span>-i<span class="w"> </span>docker-deb-builder:18.04<span class="w"> </span>-o<span class="w"> </span>output<span class="w"> </span>~/open62541
</pre></div>
</div>
<p>After a successfull build the Debian/Ubuntu packages can be found at <code class="file docutils literal notranslate"><span class="pre">~/development/docker-deb-builder/output</span></code></p>
</section>
<section id="cmake-build-options-and-debian-packaging">
<h3>CMake Build Options and Debian Packaging<a class="headerlink" href="#cmake-build-options-and-debian-packaging" title="Link to this heading">¶</a></h3>
<p>If the open62541 library will be build as a Debian package using a pack branch (e.g. pack/master or pack/1.0)
then altering or adding CMake build options should be done inside the <code class="file docutils literal notranslate"><span class="pre">debian/rules</span></code> file respectively in
the <code class="file docutils literal notranslate"><span class="pre">debian/rules-template</span></code> file if working with a development branch (e.g. master or 1.0).</p>
<p>The section in <code class="file docutils literal notranslate"><span class="pre">debian/rules</span></code> where the CMake build options are defined is</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
override_dh_auto_configure:
<span class="w">    </span>dh_auto_configure<span class="w"> </span>--<span class="w"> </span>-DBUILD_SHARED_LIBS<span class="o">=</span>ON<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>RelWithDebInfo<span class="w"> </span>-DUA_NAMESPACE_ZERO<span class="o">=</span>FULL<span class="w"> </span>-DUA_ENABLE_AMALGAMATION<span class="o">=</span>OFF<span class="w"> </span>-DUA_PACK_DEBIAN<span class="o">=</span>ON
...
</pre></div>
</div>
<p>This CMake build options will be passed as command line variables to CMake during Debian packaging.</p>
</section>
</section>
<section id="build-options">
<span id="id1"></span><h2>Build Options<a class="headerlink" href="#build-options" title="Link to this heading">¶</a></h2>
<p>The open62541 project uses CMake to manage the build options, for code
generation and to generate build projects for the different systems and IDEs.
The tools <em>ccmake</em> or <em>cmake-gui</em> can be used to graphically set the build
options.</p>
<p>Most options can be changed manually in <code class="file docutils literal notranslate"><span class="pre">ua_config.h</span></code> (<code class="file docutils literal notranslate"><span class="pre">open62541.h</span></code>
for the single-file release) after the code generation. But usually there is no
need to adjust them.</p>
<section id="main-build-options">
<h3>Main Build Options<a class="headerlink" href="#main-build-options" title="Link to this heading">¶</a></h3>
<dl>
<dt><strong>CMAKE_BUILD_TYPE</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RelWithDebInfo</span></code> -O2 optimization with debug symbols</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Release</span></code> -O2 optimization without debug symbols</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Debug</span></code> -O0 optimization with debug symbols</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MinSizeRel</span></code> -Os optimization without debug symbols</p></li>
</ul>
</dd>
<dt><strong>UA_LOGLEVEL</strong></dt><dd><p>The SDK logs events of the level defined in <code class="docutils literal notranslate"><span class="pre">UA_LOGLEVEL</span></code> and above only.
The logging event levels are as follows:</p>
<ul class="simple">
<li><p>600: Fatal</p></li>
<li><p>500: Error</p></li>
<li><p>400: Warning</p></li>
<li><p>300: Info</p></li>
<li><p>200: Debug</p></li>
<li><p>100: Trace</p></li>
</ul>
</dd>
<dt><strong>UA_MULTITHREADING</strong></dt><dd><blockquote>
<div><p>Level of multi-threading support. The supported levels are currently as follows:</p>
</div></blockquote>
<ul class="simple">
<li><p>0-99: Multithreading support disabled.</p></li>
<li><p>&gt;=100: API functions marked with the UA_THREADSAFE-macro are protected internally with mutexes.
Multiple threads are allowed to call these functions of the SDK at the same time without causing race conditions.
Furthermore, this level support the handling of asynchronous method calls from external worker threads.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="select-build-artefacts">
<h3>Select build artefacts<a class="headerlink" href="#select-build-artefacts" title="Link to this heading">¶</a></h3>
<p>By default only the main library shared object libopen62541.so (open62541.dll)
or static linking archive open62541.a (open62541.lib) is built. Additional
artifacts can be specified by the following options:</p>
<dl class="simple">
<dt><strong>UA_BUILD_EXAMPLES</strong></dt><dd><p>Compile example servers and clients from <code class="file docutils literal notranslate"><span class="pre">examples/*.c</span></code>.</p>
</dd>
<dt><strong>UA_BUILD_UNIT_TESTS</strong></dt><dd><p>Compile unit tests. The tests can be executed with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code></p>
</dd>
<dt><strong>UA_BUILD_SELFSIGNED_CERTIFICATE</strong></dt><dd><p>Generate a self-signed certificate for the server (openSSL required)</p>
</dd>
</dl>
</section>
<section id="detailed-sdk-features">
<h3>Detailed SDK Features<a class="headerlink" href="#detailed-sdk-features" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt><strong>UA_ENABLE_SUBSCRIPTIONS</strong></dt><dd><p>Enable subscriptions</p>
</dd>
<dt><strong>UA_ENABLE_SUBSCRIPTIONS_EVENTS (EXPERIMENTAL)</strong></dt><dd><p>Enable the use of events for subscriptions. This is a new feature and currently marked as EXPERIMENTAL.</p>
</dd>
<dt><strong>UA_ENABLE_SUBSCRIPTIONS_ALARMS_CONDITIONS (EXPERIMENTAL)</strong></dt><dd><p>Enable the use of A&amp;C for subscriptions. This is a new feature build upon events and currently marked as EXPERIMENTAL.</p>
</dd>
<dt><strong>UA_ENABLE_METHODCALLS</strong></dt><dd><p>Enable the Method service set</p>
</dd>
<dt><strong>UA_ENABLE_PARSING</strong></dt><dd><p>Enable parsing human readable formats of builtin data types (Guid, NodeId, etc.).
Utility functions that are not essential to the SDK.</p>
</dd>
<dt><strong>UA_ENABLE_NODEMANAGEMENT</strong></dt><dd><p>Enable dynamic addition and removal of nodes at runtime</p>
</dd>
<dt><strong>UA_ENABLE_AMALGAMATION</strong></dt><dd><p>Compile a single-file release into the files <code class="file docutils literal notranslate"><span class="pre">open62541.c</span></code> and <code class="file docutils literal notranslate"><span class="pre">open62541.h</span></code>. Not recommended for installation.</p>
</dd>
<dt><strong>UA_ENABLE_IMMUTABLE_NODES</strong></dt><dd><p>Nodes in the information model are not edited but copied and replaced. The
replacement is done with atomic operations so that the information model is
always consistent and can be accessed from an interrupt or parallel thread
(depends on the node storage plugin implementation).</p>
</dd>
<dt><strong>UA_ENABLE_COVERAGE</strong></dt><dd><p>Measure the coverage of unit tests</p>
</dd>
<dt><strong>UA_ENABLE_DISCOVERY</strong></dt><dd><p>Enable Discovery Service (LDS)</p>
</dd>
<dt><strong>UA_ENABLE_DISCOVERY_MULTICAST</strong></dt><dd><p>Enable Discovery Service with multicast support (LDS-ME)</p>
</dd>
<dt><strong>UA_ENABLE_DISCOVERY_SEMAPHORE</strong></dt><dd><p>Enable Discovery Semaphore support</p>
</dd>
<dt><strong>UA_ENABLE_ENCRYPTION</strong></dt><dd><p>Enable encryption support and specify the used encryption backend. The possible
options are:
- <code class="docutils literal notranslate"><span class="pre">OFF</span></code> No encryption support. (default)
- <code class="docutils literal notranslate"><span class="pre">MBEDTLS</span></code> Encryption support using mbed TLS
- <code class="docutils literal notranslate"><span class="pre">OPENSSL</span></code> Encryption support using OpenSSL
- <code class="docutils literal notranslate"><span class="pre">LIBRESSL</span></code> EXPERIMENTAL: Encryption support using LibreSSL</p>
</dd>
<dt><strong>UA_ENABLE_ENCRYPTION_TPM2</strong></dt><dd><dl class="simple">
<dt>Enable TPM hardware for encryption. The possible options are:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OFF</span></code> No TPM encryption support. (default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ON</span></code> TPM encryption support</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
<p><strong>UA_NAMESPACE_ZERO</strong></p>
<blockquote>
<div><p>Namespace zero contains the standard-defined nodes. The full namespace zero
may not be required for all applications. The selectable options are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MINIMAL</span></code>: A barebones namespace zero that is compatible with most
clients. But this namespace 0 is so small that it does not pass the CTT
(Conformance Testing Tools of the OPC Foundation).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REDUCED</span></code>: Small namespace zero that passes the CTT.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FULL</span></code>: Full namespace zero generated from the official XML definitions.</p></li>
</ul>
<p>The advanced build option <code class="docutils literal notranslate"><span class="pre">UA_FILE_NS0</span></code> can be used to override the XML
file used for namespace zero generation.</p>
</div></blockquote>
<p>Some options are marked as advanced. The advanced options need to be toggled to
be visible in the cmake GUIs.</p>
<dl class="simple">
<dt><strong>UA_ENABLE_TYPEDESCRIPTION</strong></dt><dd><p>Add the type and member names to the UA_DataType structure. Enabled by default.</p>
</dd>
<dt><strong>UA_ENABLE_STATUSCODE_DESCRIPTIONS</strong></dt><dd><p>Compile the human-readable name of the StatusCodes into the binary. Enabled by default.</p>
</dd>
<dt><strong>UA_ENABLE_FULL_NS0</strong></dt><dd><p>Use the full NS0 instead of a minimal Namespace 0 nodeset
<code class="docutils literal notranslate"><span class="pre">UA_FILE_NS0</span></code> is used to specify the file for NS0 generation from namespace0 folder. Default value is <code class="docutils literal notranslate"><span class="pre">Opc.Ua.NodeSet2.xml</span></code></p>
</dd>
</dl>
</section>
<section id="pubsub-build-options">
<h3>PubSub Build Options<a class="headerlink" href="#pubsub-build-options" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt><strong>UA_ENABLE_PUBSUB</strong></dt><dd><p>Enable the experimental OPC UA PubSub support. The option will include the
PubSub UDP multicast plugin. Disabled by default.</p>
</dd>
<dt><strong>UA_ENABLE_PUBSUB_DELTAFRAMES</strong></dt><dd><p>The PubSub messages differentiate between keyframe (all published values
contained) and deltaframe (only changed values contained) messages.
Deltaframe messages creation consumes some additional resources and can be
disabled with this flag. Disabled by default.</p>
</dd>
<dt><strong>UA_ENABLE_PUBSUB_FILE_CONFIG</strong></dt><dd><p>Enable loading OPC UA PubSub configuration from File/ByteString. Enabling
PubSub informationmodel methods also will add a method to the
Publish/Subscribe object which allows configuring PubSub at runtime.</p>
</dd>
<dt><strong>UA_ENABLE_PUBSUB_INFORMATIONMODEL</strong></dt><dd><p>Enable the information model representation of the PubSub configuration. For
more details take a look at the following section <cite>PubSub Information Model
Representation</cite>. Disabled by default.</p>
</dd>
<dt><strong>UA_ENABLE_PUBSUB_MONITORING</strong></dt><dd><p>Enable the experimental PubSub monitoring. This feature provides a basic
framework to implement monitoring/timeout checks for PubSub components.
Initially the MessageReceiveTimeout check of a DataSetReader is provided. It
uses the internal server callback implementation. The monitoring backend can
be changed by the application to satisfy realtime requirements. Disabled by
default.</p>
</dd>
<dt><strong>UA_ENABLE_PUBSUB_ETH_UADP</strong></dt><dd><p>Enable the OPC UA Ethernet PubSub support to transport UADP NetworkMessages
as payload of Ethernet II frame without IP or UDP headers. This option will
include Publish and Subscribe based on EtherType B62C. Disabled by default.</p>
</dd>
</dl>
</section>
<section id="debug-build-options">
<h3>Debug Build Options<a class="headerlink" href="#debug-build-options" title="Link to this heading">¶</a></h3>
<p>This group contains build options mainly useful for development of the library itself.</p>
<dl class="simple">
<dt><strong>UA_DEBUG</strong></dt><dd><p>Enable assertions and additional definitions not intended for production builds</p>
</dd>
<dt><strong>UA_DEBUG_DUMP_PKGS</strong></dt><dd><p>Dump every package received by the server as hexdump format</p>
</dd>
</dl>
</section>
<section id="building-a-shared-library">
<h3>Building a shared library<a class="headerlink" href="#building-a-shared-library" title="Link to this heading">¶</a></h3>
<p>open62541 is small enough that most users will want to statically link the
library into their programs. If a shared library (.dll, .so) is required, this
can be enabled in CMake with the <code class="docutils literal notranslate"><span class="pre">BUILD_SHARED_LIBS</span></code> option. Note that this
option modifies the <code class="file docutils literal notranslate"><span class="pre">ua_config.h</span></code> file that is also included in
<code class="file docutils literal notranslate"><span class="pre">open62541.h</span></code> for the single-file distribution.</p>
</section>
<section id="minimizing-the-binary-size">
<h3>Minimizing the binary size<a class="headerlink" href="#minimizing-the-binary-size" title="Link to this heading">¶</a></h3>
<p>The size of the generated binary can be reduced considerably by adjusting the
build configuration. With open62541, it is possible to configure minimal servers
that require less than 100kB of RAM and ROM.</p>
<p>The following options influence the ROM requirements:</p>
<p>First, in CMake, the build type can be set to <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE=MinSizeRel</span></code>.
This sets the compiler flags to minimize the binary size. The build type also
strips out debug information. Second, the binary size can be reduced by removing
features via the build-flags described above.</p>
<p>Second, setting <code class="docutils literal notranslate"><span class="pre">UA_NAMESPACE_ZERO</span></code> to <code class="docutils literal notranslate"><span class="pre">MINIMAL</span></code> reduces the size of the
builtin information model. Setting this option can reduce the binary size by
half in some cases.</p>
<p>Third, some features might not be needed and can be disabled to reduce the
binary footprint. Examples for this are Subscriptions or encrypted
communication.</p>
<p>Last, logging messages take up a lot of space in the binary and might not be
needed in embedded scenarios. Setting <code class="docutils literal notranslate"><span class="pre">UA_LOGLEVEL</span></code> to a value above 600
(<code class="docutils literal notranslate"><span class="pre">FATAL</span></code>) disables all logging. In addition, the feature-flags
<code class="docutils literal notranslate"><span class="pre">UA_ENABLE_TYPEDESCRIPTION</span></code> and <code class="docutils literal notranslate"><span class="pre">UA_ENABLE_STATUSCODE_DESCRIPTIONS</span></code> add static
information to the binary that is only used for human-readable logging and
debugging.</p>
<p>The RAM requirements of a server are mostly due to the following settings:</p>
<ul class="simple">
<li><p>The size of the information model</p></li>
<li><p>The number of connected clients</p></li>
<li><p>The configured maximum message size that is preallocated</p></li>
</ul>
</section>
</section>
<section id="building-the-examples">
<h2>Building the Examples<a class="headerlink" href="#building-the-examples" title="Link to this heading">¶</a></h2>
<p>Make sure that you can build the shared library as explained in the previous steps. Even easier way
to build the examples is to install open62541 in your operating system (see <a class="reference internal" href="installing.html#installing"><span class="std std-ref">Installing open62541</span></a>).</p>
<p>Then the compiler should automatically find the includes and the shared library.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>/path-to/examples/tutorial_server_firststeps.c<span class="w"> </span>.<span class="w"> </span><span class="c1"># copy the example server</span>
gcc<span class="w"> </span>-std<span class="o">=</span>c99<span class="w"> </span>-o<span class="w"> </span>server<span class="w"> </span>tutorial_server_firststeps.c<span class="w"> </span>-lopen62541
</pre></div>
</div>
</section>
<section id="building-for-specific-architectures">
<h2>Building for specific architectures<a class="headerlink" href="#building-for-specific-architectures" title="Link to this heading">¶</a></h2>
<p>The open62541 library can be build for many operating systems and embedded systems.
This document shows a small excerpt of already tested architectures. Since the stack is only using the
C99 standard, there are many more supported architectures.</p>
<p>A full list of implemented architecture support can be found in the arch folder.</p>
<section id="windows-linux-macos">
<h3>Windows, Linux, MacOS<a class="headerlink" href="#windows-linux-macos" title="Link to this heading">¶</a></h3>
<p>These architectures are supported by default and are automatically chosen by CMake.</p>
<p>Have a look into the previous sections on how to do that.</p>
</section>
<section id="freertos-lwip">
<h3>freeRTOS + LwIP<a class="headerlink" href="#freertos-lwip" title="Link to this heading">¶</a></h3>
<p>Credits to <a class="reference external" href="https://github.com/cabralfortiss">&#64;cabralfortiss</a></p>
<p>This documentation is based on the discussion of the PR <a class="reference external" href="https://github.com/open62541/open62541/pull/2511">https://github.com/open62541/open62541/pull/2511</a>. If you have any doubts, please first check the discussion there.</p>
<p>This documentation assumes that you have a basic example using LwIP and freeRTOS that works fine, and you only want to add an OPC UA task to it.</p>
<p>There are two main ways to build open62541 for freeRTOS + LwIP:</p>
<ul class="simple">
<li><p>Select the cross compiler in CMake, set the flags needed for compilation (different for each microcontroller so it can be difficult) and then run make in the folder and the library should be generated. This method can be hard to do because you need to specify the include files and some other configurations.</p></li>
<li><p>Generate the open6254.h and open6254.c files with the freeRTOSLWIP architecture and then put these files in your project in your IDE that you’re using for compiling. This is the easiest way of doing it and the documentation only focus on this method.</p></li>
</ul>
<p>In CMake, select freertosLWIP using the variable UA_ARCHITECTURE, enable amalgamation using the UA_ENABLE_AMALGAMATION variable and just select the native compilers. Then try to compile as always. The compilation will fail, but the open62541.h and open62541.c will be generated.</p>
<p>NOTE: If you are using the memory allocation functions from freeRTOS (pvPortMalloc and family) you will need also to set the variable UA_ARCH_FREERTOS_USE_OWN_MEMORY_FUNCTIONS to true. Many users had to implement pvPortCalloc and pvPortRealloc.</p>
<p>If using the terminal, the command should look like this</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>build_freeRTOS
<span class="nb">cd</span><span class="w"> </span>build_freeRTOS
cmake<span class="w"> </span>-DUA_ARCHITECTURE<span class="o">=</span>freertosLWIP<span class="w"> </span>-DUA_ENABLE_AMALGAMATION<span class="o">=</span>ON<span class="w"> </span>../
make
</pre></div>
</div>
<p>Remember, the compilation will fail. That’s not a problem, because you need only the generated files (open62541.h and open62541.c) found in the directory where you tried to compile. Import these in your IDE that you’re using.
There is no standard way of doing the following across all IDEs, but you need to do the following configurations in your project:</p>
<ul class="simple">
<li><p>Add the open62541.c file for compilation</p></li>
<li><p>Add the variable UA_ARCHITECTURE_FREERTOSLWIP to the compilation</p></li>
<li><p>Make sure that the open62541.h is in a folder which is included in the compilation.</p></li>
</ul>
<p>When compiling LwIP you need a file called lwipopts.h. In this file, you put all the configuration variables. You need to make sure that you have the following configurations there:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define LWIP_COMPAT_SOCKETS 0 </span><span class="c1">// Don&#39;t do name define-transformation in networking function names.</span>
<span class="cp">#define LWIP_SOCKET 1 </span><span class="c1">// Enable Socket API (normally already set)</span>
<span class="cp">#define LWIP_DNS 1 </span><span class="c1">// enable the lwip_getaddrinfo function, struct addrinfo and more.</span>
<span class="cp">#define SO_REUSE 1 </span><span class="c1">// Allows to set the socket as reusable</span>
<span class="cp">#define LWIP_TIMEVAL_PRIVATE 0 </span><span class="c1">// This is optional. Set this flag if you get a compilation error about redefinition of struct timeval</span>
</pre></div>
</div>
<p>For freeRTOS there’s a similar file called FreeRTOSConfig.h. Usually, you should have an example project with this file. The only two variables that are recommended to check are:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define configCHECK_FOR_STACK_OVERFLOW 1</span>
<span class="cp">#define configUSE_MALLOC_FAILED_HOOK 1</span>
</pre></div>
</div>
<p>Most problems when running the OPC UA server in freeRTOS + LwIP come from the fact that is usually deployed in embedded systems with a limited amount of memory, so these definitions will allow checking if there was a memory problem (will save a lot of effort looking for hidden problems).</p>
<p>Now, you need to add the task that will start the OPC UA server.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">opcua_thread</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">arg</span><span class="p">){</span>

<span class="w">        </span><span class="c1">//The default 64KB of memory for sending and receicing buffer caused problems to many users. With the code below, they are reduced to ~16KB</span>
<span class="w">        </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">sendBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16000</span><span class="p">;</span><span class="w">       </span><span class="c1">//64 KB was too much for my platform</span>
<span class="w">        </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">recvBufferSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16000</span><span class="p">;</span><span class="w">       </span><span class="c1">//64 KB was too much for my platform</span>
<span class="w">        </span><span class="n">UA_UInt16</span><span class="w"> </span><span class="n">portNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4840</span><span class="p">;</span>

<span class="w">        </span><span class="n">UA_Server</span><span class="o">*</span><span class="w"> </span><span class="n">mUaServer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_Server_new</span><span class="p">();</span>
<span class="w">        </span><span class="n">UA_ServerConfig</span><span class="w"> </span><span class="o">*</span><span class="n">uaServerConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_Server_getConfig</span><span class="p">(</span><span class="n">mUaServer</span><span class="p">);</span>
<span class="w">        </span><span class="n">UA_ServerConfig_setMinimal</span><span class="p">(</span><span class="n">uaServerConfig</span><span class="p">,</span><span class="w"> </span><span class="n">portNumber</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">sendBufferSize</span><span class="p">,</span><span class="w"> </span><span class="n">recvBufferSize</span><span class="p">);</span>

<span class="w">        </span><span class="c1">//VERY IMPORTANT: Set the hostname with your IP before starting the server</span>
<span class="w">        </span><span class="n">UA_ServerConfig_setCustomHostname</span><span class="p">(</span><span class="n">uaServerConfig</span><span class="p">,</span><span class="w"> </span><span class="n">UA_STRING</span><span class="p">(</span><span class="s">&quot;192.168.0.102&quot;</span><span class="p">));</span>

<span class="w">        </span><span class="c1">//The rest is the same as the example</span>

<span class="w">        </span><span class="n">UA_Boolean</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// add a variable node to the adresspace</span>
<span class="w">        </span><span class="n">UA_VariableAttributes</span><span class="w"> </span><span class="n">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_VariableAttributes_default</span><span class="p">;</span>
<span class="w">        </span><span class="n">UA_Int32</span><span class="w"> </span><span class="n">myInteger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="w">        </span><span class="n">UA_Variant_setScalarCopy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attr</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">myInteger</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">UA_TYPES</span><span class="p">[</span><span class="n">UA_TYPES_INT32</span><span class="p">]);</span>
<span class="w">        </span><span class="n">attr</span><span class="p">.</span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_LOCALIZEDTEXT_ALLOC</span><span class="p">(</span><span class="s">&quot;en-US&quot;</span><span class="p">,</span><span class="s">&quot;the answer&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">attr</span><span class="p">.</span><span class="n">displayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_LOCALIZEDTEXT_ALLOC</span><span class="p">(</span><span class="s">&quot;en-US&quot;</span><span class="p">,</span><span class="s">&quot;the answer&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">UA_NodeId</span><span class="w"> </span><span class="n">myIntegerNodeId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_NODEID_STRING_ALLOC</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;the.answer&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">UA_QualifiedName</span><span class="w"> </span><span class="n">myIntegerName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_QUALIFIEDNAME_ALLOC</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;the answer&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">UA_NodeId</span><span class="w"> </span><span class="n">parentNodeId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_NODEID_NUMERIC</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">UA_NS0ID_OBJECTSFOLDER</span><span class="p">);</span>
<span class="w">        </span><span class="n">UA_NodeId</span><span class="w"> </span><span class="n">parentReferenceNodeId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_NODEID_NUMERIC</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">UA_NS0ID_ORGANIZES</span><span class="p">);</span>
<span class="w">        </span><span class="n">UA_Server_addVariableNode</span><span class="p">(</span><span class="n">mUaServer</span><span class="p">,</span><span class="w"> </span><span class="n">myIntegerNodeId</span><span class="p">,</span><span class="w"> </span><span class="n">parentNodeId</span><span class="p">,</span>
<span class="w">                                                                </span><span class="n">parentReferenceNodeId</span><span class="p">,</span><span class="w"> </span><span class="n">myIntegerName</span><span class="p">,</span>
<span class="w">                                                                </span><span class="n">UA_NODEID_NULL</span><span class="p">,</span><span class="w"> </span><span class="n">attr</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">        </span><span class="cm">/* allocations on the heap need to be freed */</span>
<span class="w">        </span><span class="n">UA_VariableAttributes_clear</span><span class="p">(</span><span class="o">&amp;</span><span class="n">attr</span><span class="p">);</span>
<span class="w">        </span><span class="n">UA_NodeId_clear</span><span class="p">(</span><span class="o">&amp;</span><span class="n">myIntegerNodeId</span><span class="p">);</span>
<span class="w">        </span><span class="n">UA_QualifiedName_clear</span><span class="p">(</span><span class="o">&amp;</span><span class="n">myIntegerName</span><span class="p">);</span>

<span class="w">        </span><span class="n">UA_StatusCode</span><span class="w"> </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UA_Server_run</span><span class="p">(</span><span class="n">mUaServer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">running</span><span class="p">);</span>
<span class="w">        </span><span class="n">UA_Server_delete</span><span class="p">(</span><span class="n">mUaServer</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In your main function, after you initialize the TCP IP stack and all the hardware, you need to add the task:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">//8000 is the stack size and 8 is priority. This values might need to be changed according to your project</span>
<span class="k">if</span><span class="p">(</span><span class="nb">NULL</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">sys_thread_new</span><span class="p">(</span><span class="s">&quot;opcua_thread&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">opcua_thread</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">8000</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">))</span>
<span class="w">        </span><span class="n">LWIP_ASSERT</span><span class="p">(</span><span class="s">&quot;opcua(): Task creation failed.&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>And lastly, in the same file (or any actually) add:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">vApplicationMallocFailedHook</span><span class="p">(){</span>
<span class="w">        </span><span class="k">for</span><span class="p">(;;){</span>
<span class="w">                </span><span class="n">vTaskDelay</span><span class="p">(</span><span class="n">pdMS_TO_TICKS</span><span class="p">(</span><span class="mi">1000</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">vApplicationStackOverflowHook</span><span class="p">(</span><span class="w"> </span><span class="n">TaskHandle_t</span><span class="w"> </span><span class="n">xTask</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pcTaskName</span><span class="w"> </span><span class="p">){</span>
<span class="w">        </span><span class="k">for</span><span class="p">(;;){</span>
<span class="w">                </span><span class="n">vTaskDelay</span><span class="p">(</span><span class="n">pdMS_TO_TICKS</span><span class="p">(</span><span class="mi">1000</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And put a breakpoint in each of the vTaskDelay. These functions are called when there’s a problem in the heap or the stack. If the program gets here, you have a memory problem.</p>
<p>That’s it. Your OPC UA server should run smoothly. If not, as said before, check the discussion in <a class="reference external" href="https://github.com/open62541/open62541/pull/2511">https://github.com/open62541/open62541/pull/2511</a>. If you still have problems, ask there so the discussion remains centralized.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="installing.html" class="btn btn-neutral float-right" title="Installing open62541" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, The open62541 authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Utility Definitions &mdash; open62541 (master) 1.5.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=e0a75244"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="XML Nodeset Compiler" href="nodeset_compiler.html" />
    <link rel="prev" title="Common Definitions" href="common.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="toc.html" class="icon icon-home">
            open62541 (master)
              <img src="_static/open62541_html.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="core_concepts.html">Core Concepts of OPC UA</a></li>
<li class="toctree-l1"><a class="reference internal" href="building.html">Building open62541</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html#role-based-access-control-rbac">Role-Based Access Control (RBAC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="pubsub.html">PubSub</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common Definitions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Utility Definitions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#range-definition">Range Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#event-filter-parsing">Event-Filter Parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#random-number-generator">Random Number Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#translate-between-datatypedescription-and-ua-datatype">Translate between DataTypeDescription and UA_DataType</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-value-map">Key Value Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="#binary-connection-config-parameters">Binary Connection Config Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#default-node-attributes">Default Node Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#endpoint-url-parser">Endpoint URL Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="#escaping-of-strings">Escaping of Strings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#and-escaping">And-Escaping</a></li>
<li class="toctree-l3"><a class="reference internal" href="#percent-escaping">Percent-Escaping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#relativepath-expressions">RelativePath Expressions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-relativepaths">Example RelativePaths</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#attribute-path-expression">Attribute Path Expression</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-simpleattributeoperands">Example SimpleAttributeOperands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#convenience-macros-for-complex-types">Convenience macros for complex types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cryptography-helpers">Cryptography Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trustlist-helpers">Trustlist Helpers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nodeset_compiler.html">XML Nodeset Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="statuscodes.html">StatusCodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugin.html">Plugin API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="toc.html">open62541 (master)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="toc.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Utility Definitions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/util.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="utility-definitions">
<span id="utility"></span><h1>Utility Definitions<a class="headerlink" href="#utility-definitions" title="Link to this heading"></a></h1>
<p>Utility functions are used by both client and server. Different from the
<a class="reference internal" href="common.html#common"><span class="std std-ref">Common Definitions</span></a>, the utlity functions can use the <a class="reference internal" href="types.html#types"><span class="std std-ref">Data Types</span></a>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<section id="range-definition">
<h2>Range Definition<a class="headerlink" href="#range-definition" title="Link to this heading"></a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">min</span><span class="p">;</span>
<span class="w">    </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">max</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">UA_UInt32Range</span><span class="p">;</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">UA_Duration</span><span class="w"> </span><span class="n">min</span><span class="p">;</span>
<span class="w">    </span><span class="n">UA_Duration</span><span class="w"> </span><span class="n">max</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">UA_DurationRange</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="event-filter-parsing">
<span id="eventfilter"></span><h2>Event-Filter Parsing<a class="headerlink" href="#event-filter-parsing" title="Link to this heading"></a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifdef UA_ENABLE_SUBSCRIPTIONS_EVENTS</span>
<span class="cp">#ifdef UA_ENABLE_JSON_ENCODING</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">UA_Logger</span><span class="w"> </span><span class="o">*</span><span class="n">logger</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">UA_EventFilterParserOptions</span><span class="p">;</span>

<span class="n">UA_StatusCode</span>
<span class="nf">UA_EventFilter_parse</span><span class="p">(</span><span class="n">UA_EventFilter</span><span class="w"> </span><span class="o">*</span><span class="n">filter</span><span class="p">,</span><span class="w"> </span><span class="n">UA_ByteString</span><span class="w"> </span><span class="n">content</span><span class="p">,</span>
<span class="w">                     </span><span class="n">UA_EventFilterParserOptions</span><span class="w"> </span><span class="o">*</span><span class="n">options</span><span class="p">);</span>

<span class="cp">#endif</span>
<span class="cp">#endif</span>
</pre></div>
</div>
</section>
<section id="random-number-generator">
<h2>Random Number Generator<a class="headerlink" href="#random-number-generator" title="Link to this heading"></a></h2>
<p>If UA_MULTITHREADING is defined, then the seed is stored in thread
local storage. The seed is initialized for every thread in the
server/client.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Initialize the RNG with the seed number and UA_DateTime_now() */</span>
<span class="kt">void</span>
<span class="nf">UA_random_seed</span><span class="p">(</span><span class="n">UA_UInt64</span><span class="w"> </span><span class="n">seed</span><span class="p">);</span>

<span class="cm">/* Initialize the RNG with the seed number (only) */</span>
<span class="kt">void</span>
<span class="nf">UA_random_seed_deterministic</span><span class="p">(</span><span class="n">UA_UInt64</span><span class="w"> </span><span class="n">seed</span><span class="p">);</span>

<span class="n">UA_UInt32</span>
<span class="nf">UA_UInt32_random</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"> </span><span class="cm">/* no cryptographic entropy */</span>

<span class="n">UA_Guid</span>
<span class="nf">UA_Guid_random</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w">   </span><span class="cm">/* no cryptographic entropy */</span>
</pre></div>
</div>
</section>
<section id="translate-between-datatypedescription-and-ua-datatype">
<h2>Translate between DataTypeDescription and UA_DataType<a class="headerlink" href="#translate-between-datatypedescription-and-ua-datatype" title="Link to this heading"></a></h2>
<p>The ExtensionObject for the description is either of</p>
<ul class="simple">
<li><p>SimpleTypeDescription</p></li>
<li><p>EnumDescription</p></li>
<li><p>StructureDescription</p></li>
</ul>
<p>The generated UA_DataType faithfully generates the padding of the
corresponding C-structures.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">UA_StatusCode</span>
<span class="nf">UA_DataType_fromDescription</span><span class="p">(</span><span class="n">UA_DataType</span><span class="w"> </span><span class="o">*</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_ExtensionObject</span><span class="w"> </span><span class="o">*</span><span class="n">descr</span><span class="p">,</span>
<span class="w">                            </span><span class="k">const</span><span class="w"> </span><span class="n">UA_DataTypeArray</span><span class="w"> </span><span class="o">*</span><span class="n">customTypes</span><span class="p">);</span>

<span class="n">UA_StatusCode</span>
<span class="nf">UA_DataType_toDescription</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_DataType</span><span class="w"> </span><span class="o">*</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">UA_ExtensionObject</span><span class="w"> </span><span class="o">*</span><span class="n">descr</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="key-value-map">
<h2>Key Value Map<a class="headerlink" href="#key-value-map" title="Link to this heading"></a></h2>
<p>Helper functions to work with configuration parameters in an array of
UA_KeyValuePair. Lookup is linear. So this is for small numbers of keys. The
methods below that accept a <cite>const UA_KeyValueMap</cite> as an argument also accept
NULL for that argument and treat it as an empty map.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* The layout is identical to UA_AdditionalParametersType (casting possible) */</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">mapSize</span><span class="p">;</span>
<span class="w">    </span><span class="n">UA_KeyValuePair</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">UA_KeyValueMap</span><span class="p">;</span>

<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="n">UA_KEYVALUEMAP_NULL</span><span class="p">;</span>

<span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span>
<span class="nf">UA_KeyValueMap_new</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">void</span>
<span class="nf">UA_KeyValueMap_clear</span><span class="p">(</span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">);</span>

<span class="kt">void</span>
<span class="nf">UA_KeyValueMap_delete</span><span class="p">(</span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">);</span>

<span class="cm">/* Is the map empty (or NULL)? */</span>
<span class="n">UA_Boolean</span>
<span class="nf">UA_KeyValueMap_isEmpty</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">);</span>

<span class="cm">/* Does the map contain an entry for the key? */</span>
<span class="n">UA_Boolean</span>
<span class="nf">UA_KeyValueMap_contains</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_QualifiedName</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>

<span class="cm">/* Insert a copy of the value. Can reallocate the underlying array. This</span>
<span class="cm"> * invalidates pointers into the previous array. If the key exists already, the</span>
<span class="cm"> * value is overwritten (upsert semantics). */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_KeyValueMap_set</span><span class="p">(</span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">,</span>
<span class="w">                   </span><span class="k">const</span><span class="w"> </span><span class="n">UA_QualifiedName</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
<span class="w">                   </span><span class="k">const</span><span class="w"> </span><span class="n">UA_Variant</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">);</span>

<span class="cm">/* The same as _set, but inserts a shallow copy of the value. Set</span>
<span class="cm"> * UA_VARIANT_DATA_NODELETE if the value should not be _cleared together with</span>
<span class="cm"> * the map. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_KeyValueMap_setShallow</span><span class="p">(</span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">,</span>
<span class="w">                          </span><span class="k">const</span><span class="w"> </span><span class="n">UA_QualifiedName</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
<span class="w">                          </span><span class="n">UA_Variant</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">);</span>

<span class="cm">/* Helper function for scalar insertion that internally calls</span>
<span class="cm"> * `UA_KeyValueMap_set` */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_KeyValueMap_setScalar</span><span class="p">(</span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">,</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="n">UA_QualifiedName</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="p">,</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="n">UA_DataType</span><span class="w"> </span><span class="o">*</span><span class="n">type</span><span class="p">);</span>

<span class="n">UA_StatusCode</span>
<span class="nf">UA_KeyValueMap_setScalarShallow</span><span class="p">(</span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">,</span>
<span class="w">                                </span><span class="k">const</span><span class="w"> </span><span class="n">UA_QualifiedName</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
<span class="w">                                </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="p">,</span>
<span class="w">                                </span><span class="k">const</span><span class="w"> </span><span class="n">UA_DataType</span><span class="w"> </span><span class="o">*</span><span class="n">type</span><span class="p">);</span>

<span class="cm">/* Returns a pointer to the value or NULL if the key is not found */</span>
<span class="k">const</span><span class="w"> </span><span class="n">UA_Variant</span><span class="w"> </span><span class="o">*</span>
<span class="nf">UA_KeyValueMap_get</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">,</span>
<span class="w">                   </span><span class="k">const</span><span class="w"> </span><span class="n">UA_QualifiedName</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>

<span class="cm">/* Returns NULL if the value for the key is not defined, not of the right</span>
<span class="cm"> * datatype or not a scalar */</span>
<span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span>
<span class="nf">UA_KeyValueMap_getScalar</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">,</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="n">UA_QualifiedName</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="n">UA_DataType</span><span class="w"> </span><span class="o">*</span><span class="n">type</span><span class="p">);</span>

<span class="cm">/* Remove a single entry. To delete the entire map, use `UA_KeyValueMap_clear`. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_KeyValueMap_remove</span><span class="p">(</span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">map</span><span class="p">,</span>
<span class="w">                      </span><span class="k">const</span><span class="w"> </span><span class="n">UA_QualifiedName</span><span class="w"> </span><span class="n">key</span><span class="p">);</span>

<span class="cm">/* Create a deep copy of the given KeyValueMap */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_KeyValueMap_copy</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">dst</span><span class="p">);</span>

<span class="cm">/* Copy entries from the right-hand-side into the left-hand-size. Reallocates</span>
<span class="cm"> * previous memory in the left-hand-side. If the operation fails, both maps are</span>
<span class="cm"> * left untouched. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_KeyValueMap_merge</span><span class="p">(</span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">lhs</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_KeyValueMap</span><span class="w"> </span><span class="o">*</span><span class="n">rhs</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="binary-connection-config-parameters">
<h2>Binary Connection Config Parameters<a class="headerlink" href="#binary-connection-config-parameters" title="Link to this heading"></a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">protocolVersion</span><span class="p">;</span>
<span class="w">    </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">recvBufferSize</span><span class="p">;</span>
<span class="w">    </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">sendBufferSize</span><span class="p">;</span>
<span class="w">    </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">localMaxMessageSize</span><span class="p">;</span><span class="w">  </span><span class="cm">/* (0 = unbounded) */</span>
<span class="w">    </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">remoteMaxMessageSize</span><span class="p">;</span><span class="w"> </span><span class="cm">/* (0 = unbounded) */</span>
<span class="w">    </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">localMaxChunkCount</span><span class="p">;</span><span class="w">   </span><span class="cm">/* (0 = unbounded) */</span>
<span class="w">    </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="n">remoteMaxChunkCount</span><span class="p">;</span><span class="w">  </span><span class="cm">/* (0 = unbounded) */</span>
<span class="p">}</span><span class="w"> </span><span class="n">UA_ConnectionConfig</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="default-node-attributes">
<span id="id1"></span><h2>Default Node Attributes<a class="headerlink" href="#default-node-attributes" title="Link to this heading"></a></h2>
<p>Default node attributes to simplify the use of the AddNodes services. For
example, Setting the ValueRank and AccessLevel to zero is often an unintended
setting and leads to errors that are hard to track down.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* The default for variables is &quot;BaseDataType&quot; for the datatype, -2 for the</span>
<span class="cm"> * valuerank and a read-accesslevel. */</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_VariableAttributes</span><span class="w"> </span><span class="n">UA_VariableAttributes_default</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_VariableTypeAttributes</span><span class="w"> </span><span class="n">UA_VariableTypeAttributes_default</span><span class="p">;</span>

<span class="cm">/* Methods are executable by default */</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_MethodAttributes</span><span class="w"> </span><span class="n">UA_MethodAttributes_default</span><span class="p">;</span>

<span class="cm">/* The remaining attribute definitions are currently all zeroed out */</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_ObjectAttributes</span><span class="w"> </span><span class="n">UA_ObjectAttributes_default</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_ObjectTypeAttributes</span><span class="w"> </span><span class="n">UA_ObjectTypeAttributes_default</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_ReferenceTypeAttributes</span><span class="w"> </span><span class="n">UA_ReferenceTypeAttributes_default</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_DataTypeAttributes</span><span class="w"> </span><span class="n">UA_DataTypeAttributes_default</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_ViewAttributes</span><span class="w"> </span><span class="n">UA_ViewAttributes_default</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="endpoint-url-parser">
<h2>Endpoint URL Parser<a class="headerlink" href="#endpoint-url-parser" title="Link to this heading"></a></h2>
<p>The endpoint URL parser is generally useful for the implementation of network
layer plugins.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Split the given endpoint url into hostname, port and path. All arguments must</span>
<span class="cm"> * be non-NULL. EndpointUrls have the form &quot;opc.tcp://hostname:port/path&quot;, port</span>
<span class="cm"> * and path may be omitted (together with the prefix colon and slash).</span>
<span class="cm"> *</span>
<span class="cm"> * @param endpointUrl The endpoint URL.</span>
<span class="cm"> * @param outHostname Set to the parsed hostname. The string points into the</span>
<span class="cm"> *        original endpointUrl, so no memory is allocated. If an IPv6 address is</span>
<span class="cm"> *        given, hostname contains e.g. &#39;[2001:0db8:85a3::8a2e:0370:7334]&#39;</span>
<span class="cm"> * @param outPort Set to the port of the url or left unchanged.</span>
<span class="cm"> * @param outPath Set to the path if one is present in the endpointUrl. Can be</span>
<span class="cm"> *        NULL. Then not path is returned. Starting or trailing &#39;/&#39; are NOT</span>
<span class="cm"> *        included in the path. The string points into the original endpointUrl,</span>
<span class="cm"> *        so no memory is allocated.</span>
<span class="cm"> * @return Returns UA_STATUSCODE_BADTCPENDPOINTURLINVALID if parsing failed. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_parseEndpointUrl</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="o">*</span><span class="n">endpointUrl</span><span class="p">,</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="o">*</span><span class="n">outHostname</span><span class="p">,</span>
<span class="w">                    </span><span class="n">UA_UInt16</span><span class="w"> </span><span class="o">*</span><span class="n">outPort</span><span class="p">,</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="o">*</span><span class="n">outPath</span><span class="p">);</span>

<span class="cm">/* Split the given endpoint url into hostname, vid and pcp. All arguments must</span>
<span class="cm"> * be non-NULL. EndpointUrls have the form &quot;opc.eth://&lt;host&gt;[:&lt;VID&gt;[.PCP]]&quot;.</span>
<span class="cm"> * The host is a MAC address, an IP address or a registered name like a</span>
<span class="cm"> * hostname. The format of a MAC address is six groups of hexadecimal digits,</span>
<span class="cm"> * separated by hyphens (e.g. 01-23-45-67-89-ab). A system may also accept</span>
<span class="cm"> * hostnames and/or IP addresses if it provides means to resolve it to a MAC</span>
<span class="cm"> * address (e.g. DNS and Reverse-ARP).</span>
<span class="cm"> *</span>
<span class="cm"> * Note: currently only parsing MAC address is supported.</span>
<span class="cm"> *</span>
<span class="cm"> * @param endpointUrl The endpoint URL.</span>
<span class="cm"> * @param vid Set to VLAN ID.</span>
<span class="cm"> * @param pcp Set to Priority Code Point.</span>
<span class="cm"> * @return Returns UA_STATUSCODE_BADINTERNALERROR if parsing failed. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_parseEndpointUrlEthernet</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="o">*</span><span class="n">endpointUrl</span><span class="p">,</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">,</span>
<span class="w">                            </span><span class="n">UA_UInt16</span><span class="w"> </span><span class="o">*</span><span class="n">vid</span><span class="p">,</span><span class="w"> </span><span class="n">UA_Byte</span><span class="w"> </span><span class="o">*</span><span class="n">pcp</span><span class="p">);</span>

<span class="cm">/* Convert given byte string to a positive number. Returns the number of valid</span>
<span class="cm"> * digits. Stops if a non-digit char is found and returns the number of digits</span>
<span class="cm"> * up to that point. */</span>
<span class="kt">size_t</span>
<span class="nf">UA_readNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_Byte</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buflen</span><span class="p">,</span><span class="w"> </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="o">*</span><span class="n">number</span><span class="p">);</span>

<span class="cm">/* Same as UA_ReadNumber but with a base parameter */</span>
<span class="kt">size_t</span>
<span class="nf">UA_readNumberWithBase</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_Byte</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buflen</span><span class="p">,</span>
<span class="w">                      </span><span class="n">UA_UInt32</span><span class="w"> </span><span class="o">*</span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">UA_Byte</span><span class="w"> </span><span class="n">base</span><span class="p">);</span>

<span class="cp">#ifndef UA_MIN</span>
<span class="cp">#define UA_MIN(A, B) ((A) &gt; (B) ? (B) : (A))</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef UA_MAX</span>
<span class="cp">#define UA_MAX(A, B) ((A) &gt; (B) ? (A) : (B))</span>
<span class="cp">#endif</span>
</pre></div>
</div>
</section>
<section id="escaping-of-strings">
<h2>Escaping of Strings<a class="headerlink" href="#escaping-of-strings" title="Link to this heading"></a></h2>
<section id="and-escaping">
<h3>And-Escaping<a class="headerlink" href="#and-escaping" title="Link to this heading"></a></h3>
<p>The “and-escaping” of strings is described in Part 4, A2. The <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> character
is used to escape the reserved characters <code class="docutils literal notranslate"><span class="pre">/.&lt;&gt;:#!&amp;</span></code>. So the string
<code class="docutils literal notranslate"><span class="pre">My.String</span></code> becomes <code class="docutils literal notranslate"><span class="pre">My&amp;.String</span></code>.</p>
<p>In addition to the standard we define “extended-and-escaping” where
additionaly commas, semicolons, brackets and whitespace characters are
escaped. This improves the parsing in a larger context, as a lexer can find
the end of the escaped string. The additionally reserved characters for the
extended escaping are <code class="docutils literal notranslate"><span class="pre">,()[]</span> <span class="pre">\t\n\v\f\r</span></code>.</p>
<p>This documentation always states whether “and-escaping” or the
“extended-and-escaping is used.</p>
</section>
<section id="percent-escaping">
<span id="id2"></span><h3>Percent-Escaping<a class="headerlink" href="#percent-escaping" title="Link to this heading"></a></h3>
<p>Percent-escaped characters get encoded as <code class="docutils literal notranslate"><span class="pre">%xx</span></code> where xx is the hex-string
for an 8-bit octet. Its use is stated in Part 6 of the OPC UA specification
for human-readable QualifiedNames, NodeIds and ExpandedNodeIds. The
specification (only) requires that the <code class="docutils literal notranslate"><span class="pre">;</span></code> characters gets escaped, and
that decoders allow percent-escaping of any character.</p>
<p>Percent-escaping was originally defined for URIs. RFC 3986 defines a set of
reserved characters (delimiters) that require escaping when they are used
within URI components. But the reserved characters can be used directly in an
URI to “delimit” between its components.</p>
<p>For the <strong>percent-escaping</strong> (e.g. used for the NamespaceUri part of the
NodeId in <code class="docutils literal notranslate"><span class="pre">UA_NodeId_printEx</span></code>), the reserved characters are the semicolon,
the percent character, whitespaces and unprintable ASCII control codes.
Besides those, any UTF8 encoding is allowed.</p>
<p>In some contexts the semicolon alone is not sufficient as the delimiter. For
our non-standard <strong>extended-percent-escaping</strong> the reserved characters are
the following (in addition to whitespaces and unprintable ASCII control
codes).:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; &#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">20</span>     <span class="s1">&#39;(&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">28</span>     <span class="s1">&#39;&lt;&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">3</span><span class="n">C</span>
<span class="s1">&#39;&quot;&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">22</span>     <span class="s1">&#39;)&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">29</span>     <span class="s1">&#39;&gt;&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">3</span><span class="n">E</span>
<span class="s1">&#39;#&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">23</span>     <span class="s1">&#39;,&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">2</span><span class="n">C</span>     <span class="s1">&#39;[&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">5</span><span class="n">B</span>
<span class="s1">&#39;%&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">25</span>     <span class="s1">&#39;/&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">2</span><span class="n">F</span>     <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1"> - %5C</span>
<span class="s1">&#39;&amp;&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">26</span>     <span class="s1">&#39;:&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">3</span><span class="n">A</span>     <span class="s1">&#39;]&#39;</span> <span class="o">-</span> <span class="o">%</span><span class="mi">5</span><span class="n">D</span>
<span class="s1">&#39;&#39;&#39; - %27     &#39;;&#39; - %3B     &#39;`&#39; - %60</span>
</pre></div>
</div>
</section>
</section>
<section id="relativepath-expressions">
<span id="relativepath"></span><h2>RelativePath Expressions<a class="headerlink" href="#relativepath-expressions" title="Link to this heading"></a></h2>
<p>Parse a RelativePath according to the format defined in Part 4, A2. This is
used e.g. for the BrowsePath structure.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">RelativePath</span> <span class="pre">:=</span> <span class="pre">(</span> <span class="pre">ReferenceType</span> <span class="pre">BrowseName</span> <span class="pre">)+</span></code></p>
</div></blockquote>
<p>The ReferenceType has one of the following formats:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/</span></code>: <em>HierarchicalReferences</em> and subtypes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.</span></code>: <em>Aggregates</em> ReferenceTypes and subtypes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">[!#]*</span> <span class="pre">BrowseName</span> <span class="pre">&gt;</span></code>: The ReferenceType is indicated by its BrowseName.
Reserved characters in the BrowseName are and-escaped. The following
prefix-modifiers are defined for the ReferenceType.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">!</span></code> switches to inverse References</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#</span></code> excludes subtypes of the ReferenceType.</p></li>
<li><p>As a non-standard extension we allow the ReferenceType in angle-brackets
as a NodeId. For example <code class="docutils literal notranslate"><span class="pre">&lt;ns=1;i=345&gt;</span></code>. If a string NodeId is used,
the string identifier is and-escaped.</p></li>
</ul>
</li>
</ul>
<p>The BrowseName is a QualifiedName. It consist of an optional NamespaceIndex
and the name itself. The NamespaceIndex can be left out for the default
Namespace zero. The name component is and-escaped (see above).</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">BrowseName</span> <span class="pre">:=</span> <span class="pre">([0-9]+</span> <span class="pre">&quot;:&quot;)?</span> <span class="pre">Name</span></code></p>
</div></blockquote>
<p>The last BrowseName in a RelativePath can be omitted. This acts as a wildcard
that matches any BrowseName.</p>
<section id="example-relativepaths">
<h3>Example RelativePaths<a class="headerlink" href="#example-relativepaths" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/2:Block&amp;.Output</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/3:Truck.0:NodeVersion</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;0:HasProperty&gt;1:Boiler/1:HeatSensor</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;0:HasChild&gt;2:Wheel</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;#Aggregates&gt;1:Boiler/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;!HasChild&gt;Truck</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;HasChild&gt;</span></code></p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">UA_StatusCode</span>
<span class="nf">UA_RelativePath_parse</span><span class="p">(</span><span class="n">UA_RelativePath</span><span class="w"> </span><span class="o">*</span><span class="n">rp</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="n">str</span><span class="p">);</span>

<span class="cm">/* Supports the lookup of non-standard ReferenceTypes by their browse name in</span>
<span class="cm"> * the information model of a server. The first matching result in the</span>
<span class="cm"> * ReferenceType hierarchy is used. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_RelativePath_parseWithServer</span><span class="p">(</span><span class="n">UA_Server</span><span class="w"> </span><span class="o">*</span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="n">UA_RelativePath</span><span class="w"> </span><span class="o">*</span><span class="n">rp</span><span class="p">,</span>
<span class="w">                                </span><span class="k">const</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="n">str</span><span class="p">);</span>

<span class="cm">/* The out-string can be pre-allocated. Then the size is adjusted or an error</span>
<span class="cm"> * returned. If the out-string is NULL, then memory is allocated for it. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_RelativePath_print</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_RelativePath</span><span class="w"> </span><span class="o">*</span><span class="n">rp</span><span class="p">,</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="o">*</span><span class="n">out</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="attribute-path-expression">
<span id="parse-sao"></span><h2>Attribute Path Expression<a class="headerlink" href="#attribute-path-expression" title="Link to this heading"></a></h2>
<p>The data types <code class="docutils literal notranslate"><span class="pre">ReadValueId</span></code>, <code class="docutils literal notranslate"><span class="pre">AttributeOperand</span></code> and
<code class="docutils literal notranslate"><span class="pre">SimpleAttributeOperand</span></code> define the location of a value. That is, they
define an attribute (with an optional index-range) of a node in the
information model. The <code class="docutils literal notranslate"><span class="pre">AttributeOperand</span></code> data type has the most features.
The other two are similar but simplified:</p>
<blockquote>
<div><dl class="simple">
<dt>ReadValueId :=</dt><dd><p>NodeId? (“#” Attribute)? (“[” IndexRange “]”)?</p>
</dd>
<dt>AttributeOperand :=</dt><dd><p>NodeId? RelativePath? (“#” Attribute)? (“[” IndexRange “]”)?</p>
</dd>
<dt>SimpleAttributeOperand :=</dt><dd><p>TypeDefId? (“/” BrowseName)* (“#” Attribute)? (“[” IndexRange “]”)?</p>
</dd>
</dl>
</div></blockquote>
<p>The ReadValueId is used for the Read Service. The default NodeId is <code class="docutils literal notranslate"><span class="pre">i=0</span></code>.
The default attribute is <code class="docutils literal notranslate"><span class="pre">#Value</span></code>.</p>
<p>The AttributeOperand is used for the Query Service. It extends the
ReadValueId with a RelativePath to be followed from the initial node. The
default NodeId is the ObjectsFolder <code class="docutils literal notranslate"><span class="pre">i=85</span></code>. The default attribute is
<code class="docutils literal notranslate"><span class="pre">#Value</span></code>.</p>
<p>The SimpleAttributeOperand is used for the Query Service and for
<a class="reference internal" href="#eventfilter"><span class="std std-ref">Event-Filter Parsing</span></a>. It is a simplified AttributeOperand where all references
in the RelativePath are (subtypes of) HierarchicalReferences. So the <code class="docutils literal notranslate"><span class="pre">/</span></code>
separator is mandatory. The initial NodeId is called <em>TypeDefinitionId</em>
because SimpleAttributeOperands are typically used in EventFilters to
reference the child nodes of an EventType to select the values reported for
each event instance.</p>
<p>The different parts of the expression are parsed as follows:</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="types.html#nodeid"><span class="std std-ref">NodeId</span></a> uses the human-readable format of Part 6, 5.3.1.10.
String NodeIds use the extended-and-escaping from above.</p></li>
<li><p>The <a class="reference internal" href="#relativepath"><span class="std std-ref">RelativePath Expressions</span></a> use the human-readable format with
extended-and-escaping for strings.</p></li>
<li><p>The <a class="reference internal" href="common.html#attribute-id"><span class="std std-ref">Attribute Id</span></a> is the human-readable name of the selected node
attribute.</p></li>
<li><p>For the index range, see the section on <a class="reference internal" href="types.html#numericrange"><span class="std std-ref">NumericRange</span></a>.</p></li>
</ul>
<section id="example-simpleattributeoperands">
<h3>Example SimpleAttributeOperands<a class="headerlink" href="#example-simpleattributeoperands" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ns=2;s=TruckEventType/3:Truck/5:Wheel#Value[1:3]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/3:Truck/5:Wheel</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#BrowseName</span></code></p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">UA_StatusCode</span>
<span class="nf">UA_ReadValueId_parse</span><span class="p">(</span><span class="n">UA_ReadValueId</span><span class="w"> </span><span class="o">*</span><span class="n">rvi</span><span class="p">,</span>
<span class="w">                     </span><span class="k">const</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="n">str</span><span class="p">);</span>

<span class="n">UA_StatusCode</span>
<span class="nf">UA_AttributeOperand_parse</span><span class="p">(</span><span class="n">UA_AttributeOperand</span><span class="w"> </span><span class="o">*</span><span class="n">ao</span><span class="p">,</span>
<span class="w">                          </span><span class="k">const</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="n">str</span><span class="p">);</span>

<span class="n">UA_StatusCode</span>
<span class="nf">UA_SimpleAttributeOperand_parse</span><span class="p">(</span><span class="n">UA_SimpleAttributeOperand</span><span class="w"> </span><span class="o">*</span><span class="n">sao</span><span class="p">,</span>
<span class="w">                                </span><span class="k">const</span><span class="w"> </span><span class="n">UA_String</span><span class="w"> </span><span class="n">str</span><span class="p">);</span>

<span class="cm">/* The out-string can be pre-allocated. Then the size is adjusted or an error</span>
<span class="cm"> * returned. If the out-string is NULL, then memory is allocated for it. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_ReadValueId_print</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_ReadValueId</span><span class="w"> </span><span class="o">*</span><span class="n">rvi</span><span class="p">,</span>
<span class="w">                     </span><span class="n">UA_String</span><span class="w"> </span><span class="o">*</span><span class="n">out</span><span class="p">);</span>

<span class="n">UA_StatusCode</span>
<span class="nf">UA_AttributeOperand_print</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_AttributeOperand</span><span class="w"> </span><span class="o">*</span><span class="n">ao</span><span class="p">,</span>
<span class="w">                          </span><span class="n">UA_String</span><span class="w"> </span><span class="o">*</span><span class="n">out</span><span class="p">);</span>

<span class="n">UA_StatusCode</span>
<span class="nf">UA_SimpleAttributeOperand_print</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_SimpleAttributeOperand</span><span class="w"> </span><span class="o">*</span><span class="n">sao</span><span class="p">,</span>
<span class="w">                                </span><span class="n">UA_String</span><span class="w"> </span><span class="o">*</span><span class="n">out</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="convenience-macros-for-complex-types">
<h2>Convenience macros for complex types<a class="headerlink" href="#convenience-macros-for-complex-types" title="Link to this heading"></a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define UA_PRINTF_GUID_FORMAT                                           \</span>
<span class="cp">    &quot;%08&quot; PRIx32 &quot;-%04&quot; PRIx16 &quot;-%04&quot; PRIx16 &quot;-%02&quot; PRIx8 &quot;%02&quot; PRIx8   \</span>
<span class="cp">    &quot;-%02&quot; PRIx8 &quot;%02&quot; PRIx8 &quot;%02&quot; PRIx8  &quot;%02&quot; PRIx8 &quot;%02&quot; PRIx8 &quot;%02&quot; PRIx8</span>
<span class="cp">#define UA_PRINTF_GUID_DATA(GUID) (GUID).data1, (GUID).data2, (GUID).data3, \</span>
<span class="cp">        (GUID).data4[0], (GUID).data4[1], (GUID).data4[2], (GUID).data4[3], \</span>
<span class="cp">        (GUID).data4[4], (GUID).data4[5], (GUID).data4[6], (GUID).data4[7]</span>

<span class="cp">#define UA_PRINTF_STRING_FORMAT &quot;\&quot;%.*s\&quot;&quot;</span>
<span class="cp">#define UA_PRINTF_STRING_DATA(STRING) (int)(STRING).length, (STRING).data</span>
</pre></div>
</div>
</section>
<section id="cryptography-helpers">
<h2>Cryptography Helpers<a class="headerlink" href="#cryptography-helpers" title="Link to this heading"></a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Compare memory in constant time to mitigate timing attacks.</span>
<span class="cm"> * Returns true if ptr1 and ptr2 are equal for length bytes. */</span>
<span class="n">UA_Boolean</span>
<span class="nf">UA_constantTimeEqual</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ptr1</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ptr2</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">length</span><span class="p">);</span>

<span class="cm">/* Zero-out memory in a way that is not removed by compiler-optimizations. Use</span>
<span class="cm"> * this to ensure cryptographic secrets don&#39;t leave traces after the memory was</span>
<span class="cm"> * freed. */</span>
<span class="kt">void</span>
<span class="nf">UA_ByteString_memZero</span><span class="p">(</span><span class="n">UA_ByteString</span><span class="w"> </span><span class="o">*</span><span class="n">bs</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="trustlist-helpers">
<h2>Trustlist Helpers<a class="headerlink" href="#trustlist-helpers" title="Link to this heading"></a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Adds all of the certificates from the src trusted list to the dst trusted list. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_TrustListDataType_add</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_TrustListDataType</span><span class="w"> </span><span class="o">*</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="n">UA_TrustListDataType</span><span class="w"> </span><span class="o">*</span><span class="n">dst</span><span class="p">);</span>

<span class="cm">/* Replaces the contents of the destination trusted list with the certificates from the source trusted list. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_TrustListDataType_set</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_TrustListDataType</span><span class="w"> </span><span class="o">*</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="n">UA_TrustListDataType</span><span class="w"> </span><span class="o">*</span><span class="n">dst</span><span class="p">);</span>

<span class="cm">/* Removes all of the certificates from the dst trust list that are specified</span>
<span class="cm"> * in the src trust list. */</span>
<span class="n">UA_StatusCode</span>
<span class="nf">UA_TrustListDataType_remove</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_TrustListDataType</span><span class="w"> </span><span class="o">*</span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="n">UA_TrustListDataType</span><span class="w"> </span><span class="o">*</span><span class="n">dst</span><span class="p">);</span>

<span class="cm">/* Checks if the certificate is present in the trust list.</span>
<span class="cm"> * The mask parameter can be used to specify the part of the trust list to check. */</span>
<span class="n">UA_Boolean</span>
<span class="nf">UA_TrustListDataType_contains</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_TrustListDataType</span><span class="w"> </span><span class="o">*</span><span class="n">trustList</span><span class="p">,</span>
<span class="w">                              </span><span class="k">const</span><span class="w"> </span><span class="n">UA_ByteString</span><span class="w"> </span><span class="o">*</span><span class="n">certificate</span><span class="p">,</span>
<span class="w">                              </span><span class="n">UA_TrustListMasks</span><span class="w"> </span><span class="n">mask</span><span class="p">);</span>

<span class="cm">/* Returns the size of the TrustList in bytes. */</span>
<span class="n">UA_UInt32</span>
<span class="nf">UA_TrustListDataType_getSize</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">UA_TrustListDataType</span><span class="w"> </span><span class="o">*</span><span class="n">trustList</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="common.html" class="btn btn-neutral float-left" title="Common Definitions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nodeset_compiler.html" class="btn btn-neutral float-right" title="XML Nodeset Compiler" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The open62541 authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>